#### 内容区及其外围项目 ####
可以用多种属性设置各外边距，边距和内边距。<font color="#ff995" face="微软雅黑" size="3">**内容的背景也会应用到内边距。外边距通常是透明的**</font>，从中可以看到父元素的背景。内边距不能是负值，但是外边距可以。

边框使用已定义样式生成，如solid或inset，边框的样色使用border-color属性设置。如果没有设置颜色，那么边框将取元素内容的前景色。
边框与内容和内边距有相同的背景。边框的宽度绝不能为负。

#### 包含块 ####
每个元素都相对于其包含块摆放：可以这么说，包含块就是一个元素的"布局上下文"。CSS2.1定义了一系列规则来确定元素的包含块。

>对于正常的西方语言文本流中的一个元素，包含块由**最近的块级祖先框，表单元格或行内块祖先框**的内容边界构成。

考虑以下标记:

    <body>
       <div>
          <p>This is a paragraph.</p>
       </div>
    </body>

在这个非常简单的例子中，p元素的包含块是div元素，因为作为块级元素，表单元格元素或行内块元素，这是最近的祖先元素。类似的，div的包含块是body。因此，p的布局依赖于div的布局，而div的布局则依赖于body的布局。

>#### 不必担心行内元素，因为它们的摆放方式并不依赖于包含块。 ####


<font color="#ff995" face="微软雅黑" size="3">**正常流:**</font>这是西方语言文本从左到右，从上到下显示，这也是我们熟悉的传统HTML文档的文本布局。注意，在非西方语言中，流方向可能不同。大多数元素都在正常流中，要让一个元素不在正常流中，唯一的办法就是使之成为浮动或定位元素。本章只讨论正常流中的元素


<font color="#ff995" face="微软雅黑" size="3">**非替换元素:**</font>如果元素的内容包含在文档中，则称之为非替换元素。例如，如果一个段落的文本内容都放在该元素本身之内，这个段落就是一个非替换元素。

<font color="#ff995" face="微软雅黑" size="3">**替换元素:**></font>这是指用作其他内容占位符的一个元素。替换元素的一个经典例子就是img元素，它只是指向一个图像文件，这个文件将插入到文档流中该img元素本身所在位置。大多数表单元素也可以替换。(例如:`<input type="radio">`)

<font color="#ff995" face="微软雅黑" size="3">**块级元素:**></font>这是指段落，标题或div之类的元素。这些元素在正常流中时，会在其框之前和之后生成"换行"，所以处于正常流中的块级元素会垂直摆放。通过声明display:block，可以让元素生成块级框。

<font color="#ff995" face="微软雅黑" size="3">**行内元素:**></font>这是指strong或span之类的元素。这些元素不会在之前或之后生成"行分隔符"，它们是块级元素的后台。通过声明display:inline，可以让元素生成一个行内框。

<font color="#ff995" face="微软雅黑" size="3">**根元素:**></font>位于文档树顶端的元素。在HTML文档中，这就是元素html。在XML文档中，则可以是该语言允许的任何元素。

#### 块级元素 ####
#### 水平格式化 ####
正常流中块级元素框的水平部分总和就等于父元素的width

#### 水平属性 ####
水平格式化的"7大属性"是:margin-left,border-left,padding-left,width,padding-right,border-right和margin-right。这七个属性的值加在一起必须是元素包含块的宽度，这往往是块元素的父元素的width值(因为块级元素的父元素几乎都是块级元素。)

在这7个属性中，只有3个属性可以设置为auto:元素内容的width，以及左，右外边距。其余属性必须设置为特定的值，或者默认宽度为0.

>设置元素大小的另一种方法是将某个外边距以及width设置为auto。设置为auto外边距会减为0.

    <p style="width:auto;margin-left:auto;margin-right:100px">left margin evaluates to 0.</p>

>如果这3个属性都设置为auto会怎么样呢？答案很简单：两个外边距都会设置为0，而width会尽可能宽。这种结果与默认情况是相同的，即没有外边距或width显示声明任何值。在这种情况下，外边距默认为0，width默认为auto。

<font color="#ff995" face="微软雅黑" size="3">**注意:**</font>要记住，内边距，边框和内容宽度(及高度)绝对不能为负。只有外边距能小于0.

>边框的宽度不能是百分数，而只能是长度。基本原则是:只使用百分数将无法创建完全灵活的元素布局(即所有属性都可设置)，除非你不想使用边框。

#### 替换元素 ####
替换块级元素管理起来更简单一些。非替换块级元素的所有规则同样适用于替换块元素，只有一个例外:如果width为auto，元素的宽度则是内容的固有宽度。


#### 垂直格式化 ####
类似于水平格式化，块级元素的垂直格式化也有自己一系列有意思的行为。一个元素的默认高度由其内容决定。高度还会受内容宽度的影响；段落越窄，相应地就会越高。以便容纳其中所有内联的内容。

#### 垂直属性 ####
与水平格式化一样，垂直格式化也有7个相关的属性:margin-top,border-top,padding-top,height,padding-bottom,border-bottom和margin-bottom。这7个属性中只有3个属性可以设置为auto:元素内容的height以及上、下外边距。

#### 可以设置为auto的垂直属性 ####

有意思的是，如果正常流中一个块元素的margin-top或margin-bottom设置为auto，它会自动计算为0.遗憾的是，如果值为0，就不能很容易地将正常流元素在其包含块中垂直居中。这也说明，如果将一个元素的上下外边距设置为auto，实际上他们都会重置为0，使元素框没有外边距。

#### 百分数高度 ####
如果一个块级正常流元素的height设置为一个百分数，这个值则是包含块height的一个百分数。

><font color="#ff995" face="微软雅黑" size="3">由于将上、下外边距设置为auto时，实际上它们的高度将是0，因此，将元素垂直居中的唯一办法就是把上、下边距都设置为25%。</font>

#### auto高度 ####
在最简单的情况下，如果块级正常流元素设置为height:auto，显示时其高度将恰好足以包含其内联内容(包含文本)的行高。高度为auto时，会在段落上设置一个边框，并认为没有内边距，这样下边框刚好在文本最后一行的下面，上边框则刚好在文本第一行的上面。

如果块级正常流元素的高度设置为auto，而且只有块级子元素，其默认高度将是从最高块级子元素的外边框边界到最低块级子元素外框边界之间的距离。因此，子元素的外边框会"超出"包含这些子元素的元素。（看第8章解释）不过，如果块级元素有上内边距或下内边距，或者有上边框或下边框，其高度则是从其最高子元素的上外边距边界到其最低子元素的下外边距边界之间的距离。

#### 行内元素 ####
><font color="#ff995" face="微软雅黑" size="3">行内元素有一些很好的例子，如em标志和a标志，这两个标志都是非替换元素，另外图像也行内元素，不过图像是替换元素。</font>

#### 匿名文本 ####
匿名文本是指所有未包含在行内元素中的字符串。因此，标记`<p>I'm <em>so</em> happy!</p>`中，序列"I'm"和"happy!"都是匿名文本。注意，空格也是匿名文本的一部分，以内空格与其他字符一样都是正常的字符。

#### em框 ####
em框在字体中定义，也称为字符框。实际的字行可能比其em框更高或更矮。在CSS中，font-size的值确定了各个em框的高度。

#### 内容区 ####
在非替换元素中，内容区可能有两种，CSS2.1规范允许用户代理选择其中任意一种。内容区可以是元素中各字符的em框串在一起构成的框，也可以是由元素中字符字形描述的框。本书中，为简单起见采用了前一种定义，即em框定义。在替换元素中，内容区就是元素的固有高度再加上可能有的外边距，边框或内边距。

#### 行间距 ####
行间距是font-size值和line-height值之差。这个差实际上要分为两半，分别应用到内容区的顶部和底部。毫不奇怪，为内容区增加的这两部分别成为半间距，行间距只应用于非替换元素。

#### 行内框 ####
这个框通过向内容区增加行间距来描述。对于非替换元素，元素行内框的高度刚好等于line-height的值。对于替换元素，元素行内框的高度则恰好等于内容区的高度，因为行间距不应用到替换元素。

#### 行框 ####
这是包含该行中出现的行内框的最高点和最低点的最小框。换句话说，行框的上边界要位于最高行内框的上边界，而行框的底边要放在最低行内框的下边界。

#### 一组行为和有用的概念 ####
- 内容区类似于一个块级元素的内容框。
- 行内元素的背景要包围内容区及所有内边距
- 行内元素的边框要包围内容区及所有内边距和边框
- 非替换元素的内边距，边框和外边距对行内元素或其生成的框没有垂直效果；也就是说，它们不会影响元素行内框的高度(也不会影响包含该元素的行框的高度)。
- 替换元素的外边距和边框确实会影响该元素行内框的高度，相应地，也可能影响包含该元素的行框的高度。

#### 如何构造一个行框 ####
1. 按以下步骤确定行中各元素行内框的高度:
 
    a.得到各行内非替换元素及不属于后代行内元素的所有文本的font-size值和line-height值，再讲line-height减去font-size，这就得到了框的行间距。这个行间距除以2，将一半分别应用到em框的顶部和底部。
    
    b.得到各替换元素的height、margin-top、margin-bottom、padding-top、padding-bottom、border-top-width和border-bottom-width值，把它们加在一起。
2.对于各内容区，确定它在整行基线的上方和下方分别超出多少。这个任务并不容易:你必须知道各元素及匿名文本各部分的基线的位置，还要知道该行本身基线的位置，然后把它们对齐。另外，对于替换元素，要将其底边放在整行的基线上。

3.对于指定了vertical-align值的元素，确定其垂直偏移量。由此可知该元素的行内框要向上或向下移动多远，并改变元素在基线上方或下方超出的距离。

4.既然知道了所有行内框会放在哪里，再来计算最后的行框高度。为此，只需将基线与最高行内框顶端之间的距离加上基线与最低行内框底端之间的距离。

#### vertical-align各个关键字值的效果描述如下 ####
top:将元素行内框的顶端与包含该元素的顶端对齐。

bottom:将元素行内框的底端与包含该元素的行框的底端对齐。

text-top:将元素行内框的顶端与父元素内容区的顶端对齐。

text-bottom:将元素行内框的底端与父元素内容区的底端对齐。

middle:将元素行内框的垂直中点与父元素基线上0.5ex出的一点对齐。

super:将元素的内容区和行内框上移。上移的距离未指定，可能因用户代理的不同而不同。

sub:与super相同，只不过元素会下移而不是上移。

`<percentage>`将元素上移或下移一定距离，这个距离由相对于元素line-height值指定一个百分数确定。

><font color="#ff995" face="微软雅黑" size="3">line-height相对于元素本身的font-size设置，而不是相对于父元素设置。</font>

#### 缩放行高 ####
可以看到，设置line-height的最好办法就是使用一个原始数字值。之所以说这种方法最好，原因是这个数会成为缩放因子，而该因子是一个继承值而非计算值。假设你想一个文档中所有元素的line-height都是其font-size的1.5倍，可以如下声明:

    body{line-height:1.5}

缩放因子1.5在元素间逐层传递，在各层上，这个因子都做为一个乘数与各元素的font-size相乘。